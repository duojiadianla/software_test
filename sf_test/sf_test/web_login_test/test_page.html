<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>用户登录系统</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            font-family: Arial, sans-serif; 
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            height: 100vh; 
            display: flex; 
            justify-content: center; 
            align-items: center; 
        }
        .login-container { 
            background: white; 
            padding: 40px; 
            border-radius: 10px; 
            box-shadow: 0 15px 35px rgba(0,0,0,0.1); 
            width: 400px; 
        }
        h2 { text-align: center; margin-bottom: 30px; color: #333; }
        .form-group { margin-bottom: 20px; }
        label { display: block; margin-bottom: 8px; color: #555; font-weight: 500; }
        input[type="text"], input[type="password"] { 
            width: 100%; 
            padding: 12px 15px; 
            border: 2px solid #ddd; 
            border-radius: 5px; 
            font-size: 16px; 
        }
        input:focus { border-color: #667eea; outline: none; }
        .btn { 
            width: 100%; 
            padding: 12px; 
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); 
            color: white; 
            border: none; 
            border-radius: 5px; 
            font-size: 16px; 
            cursor: pointer; 
            margin-bottom: 15px;
        }
        .btn:hover { opacity: 0.9; }
        .error { color: #e74c3c; text-align: center; margin-top: 10px; display: none; }
        .success { color: #27ae60; text-align: center; margin-top: 10px; display: none; }
        .remember { display: flex; align-items: center; margin-bottom: 15px; }
        .remember input { margin-right: 8px; }
    </style>
</head>
<body>
    <div class="login-container">
        <h2>用户登录</h2>
        <form id="loginForm">
            <div class="form-group">
                <label for="username">用户名:</label>
                <input type="text" id="username" name="username" placeholder="请输入用户名" required>
            </div>
            <div class="form-group">
                <label for="password">密码:</label>
                <input type="password" id="password" name="password" placeholder="请输入密码" required>
            </div>
            <div class="remember">
                <input type="checkbox" id="remember">
                <label for="remember">记住密码</label>
            </div>
            <button type="submit" class="btn">登录</button>
            
            <div class="error" id="errorMessage"></div>
            <div class="success" id="successMessage"></div>
        </form>
    </div>

    <script>
        // 模拟用户数据库
        const users = {
            'admin': '123456',
            'user1': 'password1',
            'testuser': 'testpass'
        };

        document.getElementById('loginForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;
            const errorMessage = document.getElementById('errorMessage');
            const successMessage = document.getElementById('successMessage');
            
            // 隐藏所有消息
            errorMessage.style.display = 'none';
            successMessage.style.display = 'none';
            
            // 输入验证
            if (!username.trim()) {
                errorMessage.textContent = '用户名不能为空';
                errorMessage.style.display = 'block';
                return;
            }
            
            if (!password.trim()) {
                errorMessage.textContent = '密码不能为空';
                errorMessage.style.display = 'block';
                return;
            }
            
            // 安全检查 - 防止SQL注入和XSS
            const sqlInjectionPattern = /(\b(SELECT|INSERT|UPDATE|DELETE|DROP|UNION|OR|AND)\b|'|"|;|--)/i;
            const xssPattern = /(<script|javascript:|onclick|onload|onerror)/i;
            
            if (sqlInjectionPattern.test(username) || sqlInjectionPattern.test(password)) {
                errorMessage.textContent = '检测到非法字符，请重新输入';
                errorMessage.style.display = 'block';
                return;
            }
            
            if (xssPattern.test(username) || xssPattern.test(password)) {
                errorMessage.textContent = '输入内容包含不安全字符';
                errorMessage.style.display = 'block';
                return;
            }
            
            // 验证用户名和密码
            if (users[username] && users[username] === password) {
                successMessage.textContent = '登录成功！正在跳转...';
                successMessage.style.display = 'block';
                console.log(`登录成功 - 用户: ${username}`);
                
                // 模拟跳转
                setTimeout(() => {
                    alert(`欢迎回来，${username}！`);
                }, 1000);
            } else {
                errorMessage.textContent = '用户名或密码错误';
                errorMessage.style.display = 'block';
                console.log(`登录失败 - 用户: ${username}, 密码: ${password}`);
            }
        });

        // 记住密码功能
        window.addEventListener('load', function() {
            const savedUsername = localStorage.getItem('savedUsername');
            const savedPassword = localStorage.getItem('savedPassword');
            const rememberCheckbox = document.getElementById('remember');
            
            if (savedUsername && savedPassword) {
                document.getElementById('username').value = savedUsername;
                document.getElementById('password').value = savedPassword;
                rememberCheckbox.checked = true;
            }
            
            rememberCheckbox.addEventListener('change', function() {
                if (this.checked) {
                    const username = document.getElementById('username').value;
                    const password = document.getElementById('password').value;
                    localStorage.setItem('savedUsername', username);
                    localStorage.setItem('savedPassword', password);
                } else {
                    localStorage.removeItem('savedUsername');
                    localStorage.removeItem('savedPassword');
                }
            });
        });
    </script>
</body>
</html>